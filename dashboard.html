<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PULSE DENGUE - Centro de Vigilancia Epidemiol√≥gica</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
    <style>
        /* =============================================
           CSS VARIABLES
           ============================================= */
        :root {
            --primary: #00D9FF;
            --primary-dark: #00A3CC;
            --primary-glow: rgba(0, 217, 255, 0.3);
            --secondary: #FF6B35;
            --secondary-glow: rgba(255, 107, 53, 0.3);
            --success: #00E676;
            --success-glow: rgba(0, 230, 118, 0.3);
            --warning: #FFD700;
            --warning-glow: rgba(255, 215, 0, 0.3);
            --danger: #FF4444;
            --danger-glow: rgba(255, 68, 68, 0.3);
            --purple: #9B59B6;
            --bg-dark: #0A0A0F;
            --bg-darker: #050508;
            --bg-card: rgba(255, 255, 255, 0.03);
            --bg-card-hover: rgba(255, 255, 255, 0.06);
            --border: rgba(255, 255, 255, 0.08);
            --border-light: rgba(255, 255, 255, 0.15);
            --text-primary: #FFFFFF;
            --text-secondary: rgba(255, 255, 255, 0.6);
            --text-muted: rgba(255, 255, 255, 0.4);
            --sidebar-width: 280px;
            --sidebar-collapsed: 80px;
            --topbar-height: 70px;
        }

        /* =============================================
           RESET & BASE
           ============================================= */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-darker);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.5;
        }

        /* =============================================
           SCROLLBAR
           ============================================= */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.03);
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        /* =============================================
           ANIMATIONS
           ============================================= */
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px var(--primary-glow); }
            50% { box-shadow: 0 0 40px var(--primary-glow); }
        }

        @keyframes slideInRight {
            from { transform: translateX(30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideInUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes alertPulse {
            0%, 100% { box-shadow: 0 0 0 0 var(--danger-glow); }
            50% { box-shadow: 0 0 20px 10px transparent; }
        }

        @keyframes liveDot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @keyframes countUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes ringProgress {
            0% { stroke-dashoffset: 377; }
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* =============================================
           SIDEBAR
           ============================================= */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: linear-gradient(180deg, rgba(13, 13, 20, 0.98) 0%, rgba(10, 10, 15, 0.98) 100%);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--border);
            padding: 24px 16px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .sidebar.collapsed {
            width: var(--sidebar-collapsed);
        }

        .sidebar.collapsed .logo-text,
        .sidebar.collapsed .nav-title,
        .sidebar.collapsed .nav-text,
        .sidebar.collapsed .user-info-text,
        .sidebar.collapsed .nav-badge {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }

        .sidebar.collapsed .nav-item {
            justify-content: center;
            padding: 14px;
        }

        .sidebar.collapsed .user-info {
            justify-content: center;
        }

        /* Logo */
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 0 8px;
            margin-bottom: 32px;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            min-width: 48px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--success) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            color: var(--bg-dark);
            box-shadow: 0 10px 30px var(--primary-glow);
        }

        .logo-text {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 22px;
            font-weight: 700;
            white-space: nowrap;
            transition: opacity 0.2s, width 0.3s;
        }

        .logo-text span {
            background: linear-gradient(135deg, var(--primary) 0%, var(--success) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Navigation */
        .nav-scroll {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            margin-right: -8px;
            padding-right: 8px;
        }

        .nav-section {
            margin-bottom: 28px;
        }

        .nav-title {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--text-muted);
            margin-bottom: 12px;
            padding-left: 12px;
            white-space: nowrap;
            transition: opacity 0.2s, width 0.3s;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 14px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 4px;
            color: var(--text-secondary);
            position: relative;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.12) 0%, rgba(0, 230, 118, 0.12) 100%);
            color: var(--primary);
            border: 1px solid rgba(0, 217, 255, 0.25);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 20px;
            background: linear-gradient(180deg, var(--primary) 0%, var(--success) 100%);
            border-radius: 0 3px 3px 0;
        }

        .nav-icon {
            width: 20px;
            min-width: 20px;
            text-align: center;
            font-size: 16px;
        }

        .nav-text {
            font-size: 14px;
            white-space: nowrap;
            transition: opacity 0.2s, width 0.3s;
        }

        .nav-badge {
            margin-left: auto;
            background: var(--danger);
            color: white;
            font-size: 10px;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 10px;
            animation: pulse 2s infinite;
            white-space: nowrap;
            transition: opacity 0.2s, width 0.3s;
        }

        /* Sidebar Toggle */
        .sidebar-toggle {
            position: absolute;
            right: -14px;
            top: 50%;
            transform: translateY(-50%);
            width: 28px;
            height: 28px;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 10px;
            transition: all 0.2s;
            z-index: 10;
        }

        .sidebar-toggle:hover {
            background: var(--primary);
            border-color: var(--primary);
            color: var(--bg-dark);
        }

        .sidebar.collapsed .sidebar-toggle i {
            transform: rotate(180deg);
        }

        /* User Info */
        .sidebar-footer {
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px;
            border-radius: 12px;
            transition: background 0.2s;
        }

        .user-info:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .user-avatar {
            width: 42px;
            height: 42px;
            min-width: 42px;
            background: linear-gradient(135deg, var(--secondary) 0%, #FF8F6B 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
        }

        .user-info-text {
            white-space: nowrap;
            transition: opacity 0.2s, width 0.3s;
        }

        .user-name {
            font-size: 14px;
            font-weight: 600;
        }

        .user-role {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* =============================================
           MAIN CONTENT
           ============================================= */
        .main-content {
            margin-left: var(--sidebar-width);
            min-height: 100vh;
            transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .sidebar.collapsed ~ .main-content {
            margin-left: var(--sidebar-collapsed);
        }

        /* =============================================
           TOP BAR
           ============================================= */
        .topbar {
            position: sticky;
            top: 0;
            height: var(--topbar-height);
            background: rgba(5, 5, 8, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 32px;
            z-index: 50;
        }

        .topbar-left {
            display: flex;
            flex-direction: column;
        }

        .page-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 22px;
            font-weight: 600;
        }

        .page-subtitle {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .live-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(0, 230, 118, 0.15);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            color: var(--success);
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: liveDot 1.5s infinite;
        }

        .topbar-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .search-box {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 10px 16px;
            transition: all 0.2s;
        }

        .search-box:focus-within {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-glow);
        }

        .search-box i {
            color: var(--text-muted);
        }

        .search-box input {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 14px;
            width: 200px;
            outline: none;
        }

        .search-box input::placeholder {
            color: var(--text-muted);
        }

        .topbar-btn {
            width: 44px;
            height: 44px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            position: relative;
            transition: all 0.2s;
        }

        .topbar-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .topbar-btn .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 20px;
            height: 20px;
            background: var(--danger);
            border-radius: 50%;
            font-size: 10px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .date-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 10px 16px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }

        .date-selector:hover {
            border-color: var(--primary);
        }

        .date-selector i {
            color: var(--text-secondary);
        }

        .btn-export {
            display: flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--success) 100%);
            border: none;
            border-radius: 12px;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 600;
            color: var(--bg-dark);
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-export:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px var(--primary-glow);
        }

        /* =============================================
           CONTENT AREA
           ============================================= */
        .content {
            padding: 24px 32px;
        }

        /* =============================================
           CRITICAL ALERT BANNER
           ============================================= */
        .critical-alert {
            background: linear-gradient(135deg, rgba(255, 68, 68, 0.15) 0%, rgba(255, 107, 53, 0.15) 100%);
            border: 1px solid rgba(255, 68, 68, 0.4);
            border-radius: 16px;
            padding: 20px 24px;
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 24px;
            animation: slideInUp 0.5s ease, alertPulse 3s infinite;
        }

        .alert-icon-box {
            width: 60px;
            height: 60px;
            background: rgba(255, 68, 68, 0.2);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            color: var(--danger);
            flex-shrink: 0;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--danger);
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .alert-title i {
            animation: pulse 1s infinite;
        }

        .alert-message {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .alert-actions {
            display: flex;
            gap: 12px;
            flex-shrink: 0;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #FF6666;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px var(--danger-glow);
        }

        .btn-ghost {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-primary);
        }

        .btn-ghost:hover {
            border-color: var(--text-secondary);
            background: rgba(255, 255, 255, 0.05);
        }

        /* =============================================
           STATS GRID
           ============================================= */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            animation: slideInUp 0.5s ease backwards;
        }

        .stat-card:nth-child(1) { animation-delay: 0.05s; }
        .stat-card:nth-child(2) { animation-delay: 0.1s; }
        .stat-card:nth-child(3) { animation-delay: 0.15s; }
        .stat-card:nth-child(4) { animation-delay: 0.2s; }
        .stat-card:nth-child(5) { animation-delay: 0.25s; }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--border-light);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--card-accent, var(--primary)) 0%, transparent 100%);
            opacity: 0.5;
            transition: opacity 0.3s;
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-card.critical { --card-accent: var(--danger); }
        .stat-card.warning { --card-accent: var(--warning); }
        .stat-card.success { --card-accent: var(--success); }
        .stat-card.info { --card-accent: var(--primary); }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .stat-icon.danger { background: rgba(255, 68, 68, 0.15); color: var(--danger); }
        .stat-icon.warning { background: rgba(255, 215, 0, 0.15); color: var(--warning); }
        .stat-icon.success { background: rgba(0, 230, 118, 0.15); color: var(--success); }
        .stat-icon.primary { background: rgba(0, 217, 255, 0.15); color: var(--primary); }
        .stat-icon.orange { background: rgba(255, 107, 53, 0.15); color: var(--secondary); }
        .stat-icon.purple { background: rgba(155, 89, 182, 0.15); color: var(--purple); }

        .stat-trend {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }

        .stat-trend.up { background: rgba(255, 68, 68, 0.15); color: var(--danger); }
        .stat-trend.down { background: rgba(0, 230, 118, 0.15); color: var(--success); }
        .stat-trend.stable { background: rgba(0, 217, 255, 0.15); color: var(--primary); }

        .stat-value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 36px;
            font-weight: 700;
            line-height: 1;
            margin-bottom: 6px;
            animation: countUp 0.8s ease backwards;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .stat-mini-chart {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 100px;
            height: 50px;
            opacity: 0.3;
        }

        /* =============================================
           MAIN GRID LAYOUT
           ============================================= */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 24px;
            margin-bottom: 24px;
        }

        /* =============================================
           CARD COMPONENT
           ============================================= */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            overflow: hidden;
            animation: slideInUp 0.5s ease backwards;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid var(--border);
        }

        .card-header-info {
            display: flex;
            flex-direction: column;
        }

        .card-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 16px;
            font-weight: 600;
        }

        .card-subtitle {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 2px;
        }

        .card-actions {
            display: flex;
            gap: 8px;
        }

        .card-btn {
            padding: 8px 14px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-secondary);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .card-btn:hover,
        .card-btn.active {
            background: rgba(0, 217, 255, 0.15);
            border-color: rgba(0, 217, 255, 0.4);
            color: var(--primary);
        }

        .card-body {
            padding: 24px;
        }

        /* =============================================
           INTERACTIVE RISK MAP
           ============================================= */
        .risk-map-container {
            position: relative;
            height: 500px;
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.02) 0%, rgba(0, 230, 118, 0.02) 100%);
            border-radius: 16px;
            overflow: hidden;
        }

        .map-grid {
            position: absolute;
            inset: 0;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 40px 40px;
            pointer-events: none;
        }

        .map-overlay {
            position: absolute;
            inset: 0;
            background: radial-gradient(ellipse at center, transparent 0%, rgba(5, 5, 8, 0.3) 100%);
            pointer-events: none;
        }

        /* Map Zones */
        .zone {
            position: absolute;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 5;
        }

        .zone:hover {
            transform: scale(1.15);
            z-index: 20;
        }

        .zone-pulse {
            position: absolute;
            inset: 0;
            border-radius: 50%;
            animation: zonePulse 2.5s infinite;
        }

        @keyframes zonePulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.6); opacity: 0; }
        }

        .zone.critical {
            width: 120px;
            height: 120px;
            background: radial-gradient(circle, rgba(255, 68, 68, 0.5) 0%, rgba(255, 68, 68, 0.1) 70%);
            border: 3px solid var(--danger);
            box-shadow: 0 0 40px var(--danger-glow);
        }

        .zone.critical .zone-pulse {
            background: rgba(255, 68, 68, 0.4);
        }

        .zone.high {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(255, 107, 53, 0.4) 0%, rgba(255, 107, 53, 0.1) 70%);
            border: 2px solid var(--secondary);
            box-shadow: 0 0 25px var(--secondary-glow);
        }

        .zone.high .zone-pulse {
            background: rgba(255, 107, 53, 0.3);
        }

        .zone.medium {
            width: 90px;
            height: 90px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.35) 0%, rgba(255, 215, 0, 0.1) 70%);
            border: 2px solid var(--warning);
        }

        .zone.medium .zone-pulse {
            background: rgba(255, 215, 0, 0.25);
            animation-duration: 3.5s;
        }

        .zone.low {
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, rgba(0, 230, 118, 0.3) 0%, rgba(0, 230, 118, 0.1) 70%);
            border: 2px solid var(--success);
        }

        .zone.low .zone-pulse {
            animation: none;
        }

        .zone-name {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-primary);
            z-index: 5;
        }

        .zone-value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 22px;
            font-weight: 700;
            color: var(--text-primary);
            z-index: 5;
        }

        .zone-alert {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 28px;
            height: 28px;
            background: var(--danger);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            animation: pulse 1s infinite;
            z-index: 10;
            box-shadow: 0 0 15px var(--danger-glow);
        }

        /* Map Legend */
        .map-legend {
            position: absolute;
            bottom: 16px;
            left: 16px;
            display: flex;
            gap: 16px;
            background: rgba(5, 5, 8, 0.9);
            backdrop-filter: blur(10px);
            padding: 12px 18px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 11px;
            color: var(--text-secondary);
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .legend-dot.critical { background: var(--danger); box-shadow: 0 0 8px var(--danger-glow); }
        .legend-dot.high { background: var(--secondary); }
        .legend-dot.medium { background: var(--warning); }
        .legend-dot.low { background: var(--success); }

        /* Map Controls */
        .map-controls {
            position: absolute;
            top: 16px;
            right: 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .map-ctrl-btn {
            width: 40px;
            height: 40px;
            background: rgba(5, 5, 8, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .map-ctrl-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        /* Zone Detail Panel */
        .zone-panel {
            position: absolute;
            top: 16px;
            left: 16px;
            width: 300px;
            background: rgba(10, 10, 15, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
            display: none;
            z-index: 30;
            animation: slideInRight 0.3s ease;
        }

        .zone-panel.active {
            display: block;
        }

        .zone-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border);
        }

        .zone-panel-title {
            font-size: 15px;
            font-weight: 600;
        }

        .zone-risk-tag {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .zone-risk-tag.critical { background: rgba(255, 68, 68, 0.2); color: var(--danger); }
        .zone-risk-tag.high { background: rgba(255, 107, 53, 0.2); color: var(--secondary); }
        .zone-risk-tag.medium { background: rgba(255, 215, 0, 0.2); color: var(--warning); }
        .zone-risk-tag.low { background: rgba(0, 230, 118, 0.2); color: var(--success); }

        .panel-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px;
            transition: color 0.2s;
        }

        .panel-close:hover {
            color: var(--text-primary);
        }

        .zone-panel-body {
            padding: 16px 20px;
        }

        .zone-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .zone-stat {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 14px;
            text-align: center;
        }

        .zone-stat-val {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 22px;
            font-weight: 700;
            color: var(--primary);
        }

        .zone-stat-label {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .zone-mini-chart {
            height: 80px;
            margin-bottom: 16px;
        }

        .zone-panel-actions {
            display: flex;
            gap: 10px;
        }

        .zone-panel-actions .btn {
            flex: 1;
            justify-content: center;
            padding: 10px;
            font-size: 12px;
        }

        /* =============================================
           ALERTS PANEL
           ============================================= */
        .alerts-panel {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .alerts-tabs {
            display: flex;
            gap: 8px;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border);
        }

        .alert-tab {
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .alert-tab:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .alert-tab.active {
            background: rgba(0, 217, 255, 0.15);
            color: var(--primary);
        }

        .alerts-list {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        .alert-item {
            display: flex;
            gap: 14px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 14px;
            border-left: 4px solid;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .alert-item:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(4px);
        }

        .alert-item.critical { border-color: var(--danger); }
        .alert-item.high { border-color: var(--secondary); }
        .alert-item.warning { border-color: var(--warning); }
        .alert-item.info { border-color: var(--primary); }

        .alert-item-icon {
            width: 42px;
            height: 42px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 16px;
        }

        .alert-item.critical .alert-item-icon { background: rgba(255, 68, 68, 0.15); color: var(--danger); }
        .alert-item.high .alert-item-icon { background: rgba(255, 107, 53, 0.15); color: var(--secondary); }
        .alert-item.warning .alert-item-icon { background: rgba(255, 215, 0, 0.15); color: var(--warning); }
        .alert-item.info .alert-item-icon { background: rgba(0, 217, 255, 0.15); color: var(--primary); }

        .alert-item-body {
            flex: 1;
            min-width: 0;
        }

        .alert-item-title {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .alert-item-desc {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .alert-item-time {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 8px;
        }

        /* =============================================
           CHARTS SECTION
           ============================================= */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin-bottom: 24px;
        }

        .chart-wrapper {
            height: 220px;
            position: relative;
        }

        /* =============================================
           DATA TABLE SECTION
           ============================================= */
        .data-section {
            display: grid;
            grid-template-columns: 1fr 420px;
            gap: 24px;
            margin-bottom: 24px;
        }

        .table-container {
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th,
        .data-table td {
            padding: 14px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .data-table th {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            font-weight: 500;
            background: rgba(255, 255, 255, 0.02);
        }

        .data-table tbody tr {
            transition: background 0.2s;
        }

        .data-table tbody tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .pharmacy-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .pharmacy-avatar {
            width: 40px;
            height: 40px;
            background: rgba(0, 217, 255, 0.15);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 16px;
        }

        .pharmacy-name {
            font-size: 14px;
            font-weight: 500;
        }

        .pharmacy-zone {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 500;
        }

        .status-badge.active { background: rgba(0, 230, 118, 0.15); color: var(--success); }
        .status-badge.pending { background: rgba(255, 215, 0, 0.15); color: var(--warning); }
        .status-badge.offline { background: rgba(255, 68, 68, 0.15); color: var(--danger); }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
        }

        .trend-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .trend-bar {
            width: 70px;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .trend-bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .trend-bar-fill.critical { background: var(--danger); }
        .trend-bar-fill.high { background: var(--secondary); }
        .trend-bar-fill.medium { background: var(--warning); }
        .trend-bar-fill.low { background: var(--success); }

        .trend-value {
            font-size: 13px;
            font-weight: 600;
            min-width: 50px;
        }

        .action-btn {
            width: 34px;
            height: 34px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .action-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        /* =============================================
           RECOMMENDATIONS PANEL
           ============================================= */
        .recommendations-list {
            max-height: 350px;
            overflow-y: auto;
        }

        .rec-item {
            padding: 18px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.2s;
        }

        .rec-item:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        .rec-item:last-child {
            border-bottom: none;
        }

        .rec-header {
            display: flex;
            gap: 14px;
            margin-bottom: 10px;
        }

        .rec-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .rec-icon.fumigation { background: rgba(255, 107, 53, 0.15); color: var(--secondary); }
        .rec-icon.hospital { background: rgba(0, 217, 255, 0.15); color: var(--primary); }
        .rec-icon.campaign { background: rgba(255, 215, 0, 0.15); color: var(--warning); }
        .rec-icon.stock { background: rgba(155, 89, 182, 0.15); color: var(--purple); }

        .rec-body {
            flex: 1;
        }

        .rec-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .rec-desc {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .rec-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 12px;
        }

        .priority-tag {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .priority-tag.critical { background: rgba(255, 68, 68, 0.15); color: var(--danger); }
        .priority-tag.high { background: rgba(255, 107, 53, 0.15); color: var(--secondary); }
        .priority-tag.medium { background: rgba(255, 215, 0, 0.15); color: var(--warning); }

        .rec-deadline {
            font-size: 12px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Weather Widget */
        .weather-card {
            margin: 16px;
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.1) 0%, rgba(0, 230, 118, 0.1) 100%);
            border-radius: 14px;
            padding: 18px;
        }

        .weather-header {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 14px;
        }

        .weather-icon {
            font-size: 36px;
        }

        .weather-temp {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 32px;
            font-weight: 700;
        }

        .weather-desc {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .weather-details {
            display: flex;
            gap: 20px;
            margin-bottom: 14px;
        }

        .weather-detail {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .weather-detail i {
            color: var(--primary);
        }

        .weather-warning {
            background: rgba(255, 215, 0, 0.15);
            border-radius: 10px;
            padding: 12px;
            font-size: 12px;
            color: var(--warning);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* =============================================
           MODALS
           ============================================= */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 24px;
            width: 100%;
            max-width: 650px;
            max-height: 85vh;
            overflow: hidden;
            animation: slideInUp 0.3s ease;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px;
            border-bottom: 1px solid var(--border);
        }

        .modal-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            border-radius: 10px;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: rgba(255, 68, 68, 0.2);
            color: var(--danger);
        }

        .modal-body {
            padding: 24px;
            overflow-y: auto;
            max-height: calc(85vh - 160px);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding: 20px 24px;
            border-top: 1px solid var(--border);
        }

        /* Action Plan Steps */
        .action-step {
            display: flex;
            gap: 18px;
            padding: 20px 0;
            border-bottom: 1px solid var(--border);
        }

        .action-step:last-child {
            border-bottom: none;
        }

        .step-number {
            width: 36px;
            height: 36px;
            min-width: 36px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--success) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            color: var(--bg-dark);
        }

        .step-content h4 {
            font-size: 15px;
            margin-bottom: 6px;
        }

        .step-content p {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .step-meta {
            display: flex;
            gap: 20px;
            margin-top: 12px;
        }

        .step-meta span {
            font-size: 12px;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .step-meta i {
            color: var(--primary);
        }

        /* =============================================
           RESPONSIVE DESIGN
           ============================================= */
        @media (max-width: 1600px) {
            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .charts-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 1400px) {
            .dashboard-grid,
            .data-section {
                grid-template-columns: 1fr;
            }
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 1024px) {
            .sidebar {
                width: var(--sidebar-collapsed);
            }
            .sidebar .logo-text,
            .sidebar .nav-title,
            .sidebar .nav-text,
            .sidebar .user-info-text,
            .sidebar .nav-badge {
                display: none;
            }
            .sidebar .nav-item {
                justify-content: center;
            }
            .sidebar .user-info {
                justify-content: center;
            }
            .main-content {
                margin-left: var(--sidebar-collapsed);
            }
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .topbar {
                flex-direction: column;
                height: auto;
                padding: 16px;
                gap: 16px;
            }
            .topbar-right {
                width: 100%;
                flex-wrap: wrap;
                justify-content: flex-start;
            }
            .search-box {
                flex: 1;
                min-width: 200px;
            }
            .search-box input {
                width: 100%;
            }
            .critical-alert {
                flex-direction: column;
                text-align: center;
            }
            .alert-actions {
                width: 100%;
                flex-direction: column;
            }
            .stats-grid {
                grid-template-columns: 1fr;
            }
            .content {
                padding: 16px;
            }
        }
    </style>
</head>
<body>
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
        <button class="sidebar-toggle" onclick="toggleSidebar()">
            <i class="fas fa-chevron-left"></i>
        </button>
        
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-heartbeat"></i>
            </div>
            <div class="logo-text">PULSE<span>DENGUE</span></div>
        </div>

        <div class="nav-scroll">
            <nav>
                <div class="nav-section">
                    <div class="nav-title">Principal</div>
                    <div class="nav-item active">
                        <i class="nav-icon fas fa-th-large"></i>
                        <span class="nav-text">Dashboard</span>
                    </div>
                    <div class="nav-item">
                        <i class="nav-icon fas fa-map-marked-alt"></i>
                        <span class="nav-text">Mapa de Riesgo</span>
                    </div>
                    <div class="nav-item">
                        <i class="nav-icon fas fa-bell"></i>
                        <span class="nav-text">Alertas</span>
                        <span class="nav-badge">3</span>
                    </div>
                    <div class="nav-item">
                        <i class="nav-icon fas fa-chart-line"></i>
                        <span class="nav-text">Predicciones IA</span>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-title">Gesti√≥n</div>
                    <div class="nav-item">
                        <i class="nav-icon fas fa-prescription-bottle-medical"></i>
                        <span class="nav-text">Red de Farmacias</span>
                    </div>
                    <div class="nav-item">
                        <i class="nav-icon fas fa-hospital"></i>
                        <span class="nav-text">Hospitales</span>
                    </div>
                    <div class="nav-item">
                        <i class="nav-icon fas fa-spray-can"></i>
                        <span class="nav-text">Fumigaci√≥n</span>
                    </div>
                    <div class="nav-item">
                        <i class="nav-icon fas fa-bullhorn"></i>
                        <span class="nav-text">Campa√±as</span>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-title">An√°lisis</div>
                    <div class="nav-item">
                        <i class="nav-icon fas fa-file-alt"></i>
                        <span class="nav-text">Reportes</span>
                    </div>
                    <div class="nav-item">
                        <i class="nav-icon fas fa-history"></i>
                        <span class="nav-text">Hist√≥rico</span>
                    </div>
                    <div class="nav-item">
                        <i class="nav-icon fas fa-cog"></i>
                        <span class="nav-text">Configuraci√≥n</span>
                    </div>
                </div>
            </nav>
        </div>

        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar">SC</div>
                <div class="user-info-text">
                    <div class="user-name">SEDES Santa Cruz</div>
                    <div class="user-role">Vigilancia Epidemiol√≥gica</div>
                </div>
            </div>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content" id="mainContent">
        <!-- TOP BAR -->
        <header class="topbar">
            <div class="topbar-left">
                <h1 class="page-title">Centro de Vigilancia Epidemiol√≥gica</h1>
                <div class="page-subtitle">
                    Santa Cruz de la Sierra, Bolivia
                    <span class="live-badge">
                        <span class="live-dot"></span>
                        En vivo
                    </span>
                    <span>Actualizaci√≥n: <span id="lastUpdate">hace 2 min</span></span>
                </div>
            </div>
            <div class="topbar-right">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Buscar zona, farmacia, alerta...">
                </div>
                <div class="date-selector">
                    <i class="fas fa-calendar-alt"></i>
                    <span>√öltimos 7 d√≠as</span>
                    <i class="fas fa-chevron-down" style="font-size: 10px;"></i>
                </div>
                <button class="topbar-btn" id="notifBtn">
                    <i class="fas fa-bell"></i>
                    <span class="badge">3</span>
                </button>
                <button class="topbar-btn" onclick="refreshData()">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <button class="btn-export">
                    <i class="fas fa-download"></i>
                    Exportar
                </button>
            </div>
        </header>

        <div class="content">
            <!-- CRITICAL ALERT -->
            <div class="critical-alert" id="criticalAlert">
                <div class="alert-icon-box">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="alert-content">
                    <div class="alert-title">
                        <i class="fas fa-fire"></i>
                        Alerta Cr√≠tica - Brote Inminente en Zona Norte
                    </div>
                    <p class="alert-message">
                        El modelo de IA predice 87% de probabilidad de brote en los pr√≥ximos 7 d√≠as. 
                        Se detect√≥ un incremento del 75% en ventas de antifebriles y 92% en repelentes. 
                        Se requiere acci√≥n inmediata para prevenir la propagaci√≥n.
                    </p>
                </div>
                <div class="alert-actions">
                    <button class="btn btn-danger" onclick="showActionPlan()">
                        <i class="fas fa-bolt"></i>
                        Ver Plan de Acci√≥n
                    </button>
                    <button class="btn btn-ghost" onclick="dismissAlert()">
                        <i class="fas fa-times"></i>
                        Descartar
                    </button>
                </div>
            </div>

            <!-- STATS GRID -->
            <div class="stats-grid">
                <div class="stat-card critical">
                    <div class="stat-header">
                        <div class="stat-icon danger">
                            <i class="fas fa-thermometer-full"></i>
                        </div>
                        <div class="stat-trend up">
                            <i class="fas fa-arrow-up"></i>
                            +47%
                        </div>
                    </div>
                    <div class="stat-value" id="feverStat">328</div>
                    <div class="stat-label">Ventas antifebriles hoy</div>
                </div>

                <div class="stat-card warning">
                    <div class="stat-header">
                        <div class="stat-icon orange">
                            <i class="fas fa-spray-can"></i>
                        </div>
                        <div class="stat-trend up">
                            <i class="fas fa-arrow-up"></i>
                            +62%
                        </div>
                    </div>
                    <div class="stat-value" id="repellentStat">156</div>
                    <div class="stat-label">Ventas repelentes hoy</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon warning">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="stat-trend up">
                            <i class="fas fa-arrow-up"></i>
                            +35%
                        </div>
                    </div>
                    <div class="stat-value">45</div>
                    <div class="stat-label">Consultas de s√≠ntomas</div>
                </div>

                <div class="stat-card success">
                    <div class="stat-header">
                        <div class="stat-icon success">
                            <i class="fas fa-prescription-bottle-medical"></i>
                        </div>
                        <div class="stat-trend stable">
                            <i class="fas fa-check"></i>
                            90%
                        </div>
                    </div>
                    <div class="stat-value">18/20</div>
                    <div class="stat-label">Farmacias reportando</div>
                </div>

                <div class="stat-card info">
                    <div class="stat-header">
                        <div class="stat-icon primary">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="stat-trend stable">
                            <i class="fas fa-equals"></i>
                            Estable
                        </div>
                    </div>
                    <div class="stat-value">85%</div>
                    <div class="stat-label">Precisi√≥n del modelo IA</div>
                </div>
            </div>

            <!-- MAIN GRID: Map + Alerts -->
            <div class="dashboard-grid">
                <!-- RISK MAP -->
                <div class="card" style="animation-delay: 0.3s;">
                    <div class="card-header">
                        <div class="card-header-info">
                            <div class="card-title">Mapa de Riesgo Predictivo</div>
                            <div class="card-subtitle">Probabilidad de brote por zona geogr√°fica</div>
                        </div>
                        <div class="card-actions">
                            <button class="card-btn active" data-days="7">7 d√≠as</button>
                            <button class="card-btn" data-days="14">14 d√≠as</button>
                            <button class="card-btn" data-days="21">21 d√≠as</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="risk-map-container">
                            <div class="map-grid"></div>
                            <div class="map-overlay"></div>

                            <!-- Zone Detail Panel -->
                            <div class="zone-panel" id="zonePanel">
                                <div class="zone-panel-header">
                                    <span class="zone-panel-title" id="panelTitle">Zona Norte</span>
                                    <span class="zone-risk-tag critical" id="panelRisk">CR√çTICO</span>
                                    <button class="panel-close" onclick="closeZonePanel()">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="zone-panel-body">
                                    <div class="zone-stats-grid">
                                        <div class="zone-stat">
                                            <div class="zone-stat-val" id="panelFever">+75%</div>
                                            <div class="zone-stat-label">Antifebriles</div>
                                        </div>
                                        <div class="zone-stat">
                                            <div class="zone-stat-val" id="panelRepellent">+92%</div>
                                            <div class="zone-stat-label">Repelentes</div>
                                        </div>
                                        <div class="zone-stat">
                                            <div class="zone-stat-val" id="panelPharmacies">5</div>
                                            <div class="zone-stat-label">Farmacias</div>
                                        </div>
                                        <div class="zone-stat">
                                            <div class="zone-stat-val" id="panelSymptoms">28</div>
                                            <div class="zone-stat-label">Consultas/d√≠a</div>
                                        </div>
                                    </div>
                                    <div class="zone-mini-chart">
                                        <canvas id="zoneMiniChart"></canvas>
                                    </div>
                                    <div class="zone-panel-actions">
                                        <button class="btn btn-danger">
                                            <i class="fas fa-spray-can"></i>
                                            Fumigar
                                        </button>
                                        <button class="btn btn-ghost">
                                            <i class="fas fa-file-alt"></i>
                                            Reporte
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Map Zones -->
                            <div class="zone critical" style="top: 10%; left: 60%;" onclick="showZonePanel('norte')">
                                <div class="zone-pulse"></div>
                                <div class="zone-name">Norte</div>
                                <div class="zone-value">87%</div>
                                <div class="zone-alert"><i class="fas fa-exclamation"></i></div>
                            </div>

                            <div class="zone high" style="top: 32%; left: 35%;" onclick="showZonePanel('este')">
                                <div class="zone-pulse"></div>
                                <div class="zone-name">Este</div>
                                <div class="zone-value">58%</div>
                            </div>

                            <div class="zone medium" style="top: 48%; left: 52%;" onclick="showZonePanel('centro')">
                                <div class="zone-pulse"></div>
                                <div class="zone-name">Centro</div>
                                <div class="zone-value">42%</div>
                            </div>

                            <div class="zone low" style="top: 70%; left: 42%;" onclick="showZonePanel('sur')">
                                <div class="zone-pulse"></div>
                                <div class="zone-name">Sur</div>
                                <div class="zone-value">18%</div>
                            </div>

                            <div class="zone low" style="top: 38%; left: 75%;" onclick="showZonePanel('oeste')">
                                <div class="zone-pulse"></div>
                                <div class="zone-name">Oeste</div>
                                <div class="zone-value">12%</div>
                            </div>

                            <!-- Map Controls -->
                            <div class="map-controls">
                                <button class="map-ctrl-btn" title="Acercar"><i class="fas fa-plus"></i></button>
                                <button class="map-ctrl-btn" title="Alejar"><i class="fas fa-minus"></i></button>
                                <button class="map-ctrl-btn" title="Pantalla completa"><i class="fas fa-expand"></i></button>
                                <button class="map-ctrl-btn" title="Capas"><i class="fas fa-layer-group"></i></button>
                            </div>

                            <!-- Map Legend -->
                            <div class="map-legend">
                                <div class="legend-item">
                                    <div class="legend-dot critical"></div>
                                    <span>Cr√≠tico (>70%)</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-dot high"></div>
                                    <span>Alto (50-70%)</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-dot medium"></div>
                                    <span>Moderado (30-50%)</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-dot low"></div>
                                    <span>Bajo (<30%)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ALERTS PANEL -->
                <div class="card" style="animation-delay: 0.4s;">
                    <div class="card-header">
                        <div class="card-header-info">
                            <div class="card-title">Centro de Alertas</div>
                            <div class="card-subtitle">3 alertas activas requieren atenci√≥n</div>
                        </div>
                    </div>
                    <div class="alerts-panel">
                        <div class="alerts-tabs">
                            <button class="alert-tab active">Todas</button>
                            <button class="alert-tab">Cr√≠ticas</button>
                            <button class="alert-tab">Pendientes</button>
                        </div>
                        <div class="alerts-list" id="alertsList">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- CHARTS SECTION -->
            <div class="charts-grid">
                <div class="card" style="animation-delay: 0.5s;">
                    <div class="card-header">
                        <div class="card-header-info">
                            <div class="card-title">Tendencia de Se√±ales</div>
                            <div class="card-subtitle">√öltimos 7 d√≠as - Productos centinela</div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-wrapper">
                            <canvas id="trendsChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card" style="animation-delay: 0.55s;">
                    <div class="card-header">
                        <div class="card-header-info">
                            <div class="card-title">Precisi√≥n del Modelo</div>
                            <div class="card-subtitle">Predicci√≥n vs Casos Reales</div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-wrapper">
                            <canvas id="accuracyChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card" style="animation-delay: 0.6s;">
                    <div class="card-header">
                        <div class="card-header-info">
                            <div class="card-title">Distribuci√≥n por Zonas</div>
                            <div class="card-subtitle">Nivel de riesgo actual</div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart-wrapper">
                            <canvas id="zonesChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DATA SECTION: Table + Recommendations -->
            <div class="data-section">
                <div class="card" style="animation-delay: 0.65s;">
                    <div class="card-header">
                        <div class="card-header-info">
                            <div class="card-title">Red de Farmacias Participantes</div>
                            <div class="card-subtitle">20 farmacias activas en el programa piloto</div>
                        </div>
                        <div class="card-actions">
                            <button class="card-btn"><i class="fas fa-filter"></i> Filtrar</button>
                            <button class="card-btn"><i class="fas fa-download"></i> Exportar</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Farmacia</th>
                                        <th>Estado</th>
                                        <th>√öltimo Reporte</th>
                                        <th>Antifebriles</th>
                                        <th>Repelentes</th>
                                        <th>Acci√≥n</th>
                                    </tr>
                                </thead>
                                <tbody id="pharmaciesTable">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="card" style="animation-delay: 0.7s;">
                    <div class="card-header">
                        <div class="card-header-info">
                            <div class="card-title">Acciones Recomendadas</div>
                            <div class="card-subtitle">Basadas en predicciones del modelo</div>
                        </div>
                    </div>
                    <div class="recommendations-list" id="recommendationsList">
                        <!-- Populated by JS -->
                    </div>

                    <div class="weather-card">
                        <div class="weather-header">
                            <div class="weather-icon">üåßÔ∏è</div>
                            <div>
                                <div class="weather-temp">31¬∞C</div>
                                <div class="weather-desc">Parcialmente nublado</div>
                            </div>
                        </div>
                        <div class="weather-details">
                            <div class="weather-detail">
                                <i class="fas fa-tint"></i>
                                Humedad: 78%
                            </div>
                            <div class="weather-detail">
                                <i class="fas fa-wind"></i>
                                Viento: 12 km/h
                            </div>
                        </div>
                        <div class="weather-warning">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>Condiciones √≥ptimas para reproducci√≥n de mosquitos (pr√≥x. 10 d√≠as)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ACTION PLAN MODAL -->
    <div class="modal-overlay" id="actionPlanModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-bolt" style="color: var(--danger);"></i>
                    Plan de Acci√≥n - Zona Norte
                </h2>
                <button class="modal-close" onclick="closeModal('actionPlanModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="action-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Fumigaci√≥n de Emergencia</h4>
                        <p>Iniciar operativo de fumigaci√≥n inmediato en barrios Plan 3000, Villa 1¬∞ de Mayo y Pampa de la Isla. Cubrir 15 km¬≤ prioritarios con equipos de nebulizaci√≥n ULV.</p>
                        <div class="step-meta">
                            <span><i class="fas fa-clock"></i> Plazo: 48 horas</span>
                            <span><i class="fas fa-users"></i> Equipo: 8 brigadas</span>
                        </div>
                    </div>
                </div>
                <div class="action-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Preparaci√≥n Hospitalaria</h4>
                        <p>Aumentar capacidad de camas para dengue en Hospital Municipal en 30%. Verificar stock de sueros, antipir√©ticos y concentrados de plaquetas.</p>
                        <div class="step-meta">
                            <span><i class="fas fa-clock"></i> Plazo: 7 d√≠as</span>
                            <span><i class="fas fa-bed"></i> +50 camas</span>
                        </div>
                    </div>
                </div>
                <div class="action-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Alerta a Centros de Salud</h4>
                        <p>Notificar a todos los centros de salud de la Zona Norte sobre el aumento de riesgo. Reforzar protocolo de diagn√≥stico temprano y derivaci√≥n.</p>
                        <div class="step-meta">
                            <span><i class="fas fa-clock"></i> Plazo: 24 horas</span>
                            <span><i class="fas fa-hospital"></i> 12 centros</span>
                        </div>
                    </div>
                </div>
                <div class="action-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Campa√±a de Concientizaci√≥n</h4>
                        <p>Lanzar campa√±a intensiva en redes sociales, radio local y altoparlantes m√≥viles. Mensajes sobre eliminaci√≥n de criaderos y s√≠ntomas de alerta.</p>
                        <div class="step-meta">
                            <span><i class="fas fa-clock"></i> Plazo: Esta semana</span>
                            <span><i class="fas fa-bullhorn"></i> 250,000 alcance</span>
                        </div>
                    </div>
                </div>
                <div class="action-step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h4>Monitoreo Intensivo 24/7</h4>
                        <p>Aumentar frecuencia de reportes de farmacias a 2 veces por d√≠a. Activar seguimiento en tiempo real de indicadores en dashboard.</p>
                        <div class="step-meta">
                            <span><i class="fas fa-clock"></i> Plazo: Inmediato</span>
                            <span><i class="fas fa-chart-line"></i> Monitoreo continuo</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" onclick="closeModal('actionPlanModal')">Cerrar</button>
                <button class="btn btn-danger" onclick="activatePlan()">
                    <i class="fas fa-check"></i>
                    Activar Plan
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // DATA
        // ==========================================
        const zonesData = {
            norte: { name: 'Zona Norte', risk: 87, level: 'critical', fever: '+75%', repellent: '+92%', pharmacies: 5, symptoms: 28, trend: [45, 52, 58, 65, 72, 80, 87] },
            este: { name: 'Zona Este', risk: 58, level: 'high', fever: '+48%', repellent: '+55%', pharmacies: 4, symptoms: 18, trend: [35, 38, 42, 48, 52, 55, 58] },
            centro: { name: 'Zona Centro', risk: 42, level: 'medium', fever: '+32%', repellent: '+38%', pharmacies: 5, symptoms: 12, trend: [28, 30, 33, 36, 38, 40, 42] },
            sur: { name: 'Zona Sur', risk: 18, level: 'low', fever: '+12%', repellent: '+15%', pharmacies: 3, symptoms: 5, trend: [15, 16, 17, 17, 18, 18, 18] },
            oeste: { name: 'Zona Oeste', risk: 12, level: 'low', fever: '+8%', repellent: '+10%', pharmacies: 3, symptoms: 3, trend: [10, 11, 11, 12, 12, 12, 12] }
        };

        const alertsData = [
            { type: 'critical', icon: 'exclamation-triangle', title: 'Zona Norte - Riesgo Cr√≠tico', desc: '87% probabilidad de brote. Ventas de antifebriles +75% sobre promedio.', time: 'Hace 2 horas' },
            { type: 'high', icon: 'exclamation-circle', title: 'Zona Este - Riesgo Alto', desc: '58% probabilidad de brote en 14 d√≠as. Tendencia ascendente sostenida.', time: 'Hace 5 horas' },
            { type: 'warning', icon: 'cloud-sun', title: 'Alerta Meteorol√≥gica', desc: 'Lluvias + temperaturas 28-32¬∞C pr√≥ximos 10 d√≠as. Condiciones √≥ptimas para mosquitos.', time: 'Hace 8 horas' },
            { type: 'info', icon: 'check-circle', title: 'Farmacia San Mart√≠n', desc: 'Reporte diario recibido. Datos procesados e integrados al modelo.', time: 'Hace 12 horas' },
            { type: 'info', icon: 'chart-line', title: 'Modelo Actualizado', desc: 'Nuevo ciclo de entrenamiento completado. Precisi√≥n mejorada a 85.3%.', time: 'Hace 1 d√≠a' }
        ];

        const pharmaciesData = [
            { name: 'Farmacia San Mart√≠n', zone: 'Norte', status: 'active', lastReport: 'Hace 2h', fever: 85, repellent: 92 },
            { name: 'Farmacia Bolivia', zone: 'Norte', status: 'active', lastReport: 'Hace 3h', fever: 78, repellent: 85 },
            { name: 'Farmacia del Pueblo', zone: 'Este', status: 'active', lastReport: 'Hace 1h', fever: 55, repellent: 60 },
            { name: 'Farmacia Central', zone: 'Centro', status: 'active', lastReport: 'Hace 4h', fever: 35, repellent: 42 },
            { name: 'Farmacia La Paz', zone: 'Sur', status: 'active', lastReport: 'Hace 2h', fever: 15, repellent: 18 },
            { name: 'Farmacia Guaran√≠', zone: 'Oeste', status: 'pending', lastReport: 'Hace 26h', fever: 12, repellent: 10 },
            { name: 'Farmacia Plan 3000', zone: 'Norte', status: 'active', lastReport: 'Hace 30m', fever: 88, repellent: 95 }
        ];

        const recommendationsData = [
            { type: 'fumigation', icon: 'spray-can', title: 'Fumigaci√≥n Zona Norte', desc: 'Iniciar operativo inmediato. Cubrir 15 km¬≤ prioritarios.', priority: 'critical', deadline: '48 horas' },
            { type: 'hospital', icon: 'hospital', title: 'Preparar Hospital Municipal', desc: 'Aumentar capacidad en 30%. Verificar stock de sueros.', priority: 'high', deadline: '7 d√≠as' },
            { type: 'campaign', icon: 'bullhorn', title: 'Campa√±a de Prevenci√≥n', desc: 'Lanzar campa√±a en redes y radio. Eliminaci√≥n de criaderos.', priority: 'medium', deadline: 'Esta semana' },
            { type: 'stock', icon: 'boxes', title: 'Abastecer Farmacias', desc: 'Verificar stock de antifebriles y repelentes.', priority: 'medium', deadline: '5 d√≠as' }
        ];

        // ==========================================
        // INITIALIZATION
        // ==========================================
        document.addEventListener('DOMContentLoaded', () => {
            renderAlerts();
            renderPharmacies();
            renderRecommendations();
            initCharts();
            startRealTimeSimulation();
        });

        // ==========================================
        // RENDER FUNCTIONS
        // ==========================================
        function renderAlerts() {
            const container = document.getElementById('alertsList');
            container.innerHTML = alertsData.map(a => `
                <div class="alert-item ${a.type}">
                    <div class="alert-item-icon">
                        <i class="fas fa-${a.icon}"></i>
                    </div>
                    <div class="alert-item-body">
                        <div class="alert-item-title">${a.title}</div>
                        <p class="alert-item-desc">${a.desc}</p>
                        <span class="alert-item-time"><i class="fas fa-clock"></i> ${a.time}</span>
                    </div>
                </div>
            `).join('');
        }

        function renderPharmacies() {
            const tbody = document.getElementById('pharmaciesTable');
            tbody.innerHTML = pharmaciesData.map(p => {
                const fLevel = p.fever > 60 ? 'critical' : p.fever > 40 ? 'high' : p.fever > 25 ? 'medium' : 'low';
                const rLevel = p.repellent > 60 ? 'critical' : p.repellent > 40 ? 'high' : p.repellent > 25 ? 'medium' : 'low';
                const colorMap = { critical: 'var(--danger)', high: 'var(--secondary)', medium: 'var(--warning)', low: 'var(--success)' };
                return `
                    <tr>
                        <td>
                            <div class="pharmacy-info">
                                <div class="pharmacy-avatar"><i class="fas fa-prescription-bottle-medical"></i></div>
                                <div>
                                    <div class="pharmacy-name">${p.name}</div>
                                    <div class="pharmacy-zone">Zona ${p.zone}</div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <span class="status-badge ${p.status}">
                                <span class="status-dot"></span>
                                ${p.status === 'active' ? 'Activo' : 'Pendiente'}
                            </span>
                        </td>
                        <td style="color: var(--text-secondary); font-size: 13px;">${p.lastReport}</td>
                        <td>
                            <div class="trend-indicator">
                                <div class="trend-bar"><div class="trend-bar-fill ${fLevel}" style="width: ${p.fever}%"></div></div>
                                <span class="trend-value" style="color: ${colorMap[fLevel]}">+${p.fever}%</span>
                            </div>
                        </td>
                        <td>
                            <div class="trend-indicator">
                                <div class="trend-bar"><div class="trend-bar-fill ${rLevel}" style="width: ${p.repellent}%"></div></div>
                                <span class="trend-value" style="color: ${colorMap[rLevel]}">+${p.repellent}%</span>
                            </div>
                        </td>
                        <td>
                            <button class="action-btn"><i class="fas fa-eye"></i></button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function renderRecommendations() {
            const container = document.getElementById('recommendationsList');
            container.innerHTML = recommendationsData.map(r => `
                <div class="rec-item">
                    <div class="rec-header">
                        <div class="rec-icon ${r.type}"><i class="fas fa-${r.icon}"></i></div>
                        <div class="rec-body">
                            <div class="rec-title">${r.title}</div>
                            <p class="rec-desc">${r.desc}</p>
                        </div>
                    </div>
                    <div class="rec-footer">
                        <span class="priority-tag ${r.priority}">${r.priority === 'critical' ? 'Urgente' : r.priority === 'high' ? 'Alta' : 'Media'}</span>
                        <span class="rec-deadline"><i class="fas fa-clock"></i> ${r.deadline}</span>
                    </div>
                </div>
            `).join('');
        }

        // ==========================================
        // CHARTS
        // ==========================================
        let trendsChart, accuracyChart, zonesChart, zoneMiniChart;

        function initCharts() {
            // Trends Chart
            const trendsCtx = document.getElementById('trendsChart').getContext('2d');
            trendsChart = new Chart(trendsCtx, {
                type: 'line',
                data: {
                    labels: ['Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b', 'Dom'],
                    datasets: [
                        { label: 'Antifebriles', data: [180, 195, 220, 255, 280, 310, 328], borderColor: '#FF4444', backgroundColor: 'rgba(255,68,68,0.1)', tension: 0.4, fill: true },
                        { label: 'Repelentes', data: [85, 92, 105, 118, 130, 145, 156], borderColor: '#00D9FF', backgroundColor: 'rgba(0,217,255,0.1)', tension: 0.4, fill: true },
                        { label: 'Sueros', data: [45, 48, 55, 62, 70, 78, 85], borderColor: '#FFD700', backgroundColor: 'rgba(255,215,0,0.1)', tension: 0.4, fill: true }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { labels: { color: '#fff', usePointStyle: true } } },
                    scales: {
                        x: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: 'rgba(255,255,255,0.6)' } },
                        y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: 'rgba(255,255,255,0.6)' } }
                    }
                }
            });

            // Accuracy Chart
            const accuracyCtx = document.getElementById('accuracyChart').getContext('2d');
            accuracyChart = new Chart(accuracyCtx, {
                type: 'bar',
                data: {
                    labels: ['Semana 1', 'Semana 2', 'Semana 3', 'Semana 4'],
                    datasets: [
                        { label: 'Predicci√≥n', data: [45, 62, 78, 87], backgroundColor: 'rgba(0,217,255,0.7)', borderRadius: 6 },
                        { label: 'Realidad', data: [48, 58, 75, null], backgroundColor: 'rgba(0,230,118,0.7)', borderRadius: 6 }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { labels: { color: '#fff', usePointStyle: true } } },
                    scales: {
                        x: { grid: { display: false }, ticks: { color: 'rgba(255,255,255,0.6)' } },
                        y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: 'rgba(255,255,255,0.6)' }, max: 100 }
                    }
                }
            });

            // Zones Chart
            const zonesCtx = document.getElementById('zonesChart').getContext('2d');
            zonesChart = new Chart(zonesCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Norte', 'Este', 'Centro', 'Sur', 'Oeste'],
                    datasets: [{ data: [87, 58, 42, 18, 12], backgroundColor: ['#FF4444', '#FF6B35', '#FFD700', '#00E676', '#00E676'], borderWidth: 0 }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '65%',
                    plugins: { legend: { position: 'right', labels: { color: '#fff', usePointStyle: true, padding: 15 } } }
                }
            });

            // Zone Mini Chart
            const zoneMiniCtx = document.getElementById('zoneMiniChart').getContext('2d');
            zoneMiniChart = new Chart(zoneMiniCtx, {
                type: 'line',
                data: {
                    labels: ['L', 'M', 'X', 'J', 'V', 'S', 'D'],
                    datasets: [{ data: [45, 52, 58, 65, 72, 80, 87], borderColor: '#FF4444', backgroundColor: 'rgba(255,68,68,0.2)', tension: 0.4, fill: true, pointRadius: 0 }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { x: { display: false }, y: { display: false, min: 0, max: 100 } }
                }
            });
        }

        // ==========================================
        // INTERACTIONS
        // ==========================================
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('collapsed');
        }

        function showZonePanel(zoneId) {
            const zone = zonesData[zoneId];
            document.getElementById('panelTitle').textContent = zone.name;
            document.getElementById('panelRisk').textContent = zone.level.toUpperCase();
            document.getElementById('panelRisk').className = `zone-risk-tag ${zone.level}`;
            document.getElementById('panelFever').textContent = zone.fever;
            document.getElementById('panelRepellent').textContent = zone.repellent;
            document.getElementById('panelPharmacies').textContent = zone.pharmacies;
            document.getElementById('panelSymptoms').textContent = zone.symptoms;
            
            const colors = { critical: '#FF4444', high: '#FF6B35', medium: '#FFD700', low: '#00E676' };
            zoneMiniChart.data.datasets[0].data = zone.trend;
            zoneMiniChart.data.datasets[0].borderColor = colors[zone.level];
            zoneMiniChart.data.datasets[0].backgroundColor = colors[zone.level] + '33';
            zoneMiniChart.update();
            
            document.getElementById('zonePanel').classList.add('active');
        }

        function closeZonePanel() {
            document.getElementById('zonePanel').classList.remove('active');
        }

        function showActionPlan() {
            document.getElementById('actionPlanModal').classList.add('active');
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        function dismissAlert() {
            document.getElementById('criticalAlert').style.display = 'none';
        }

        function refreshData() {
            document.getElementById('lastUpdate').textContent = 'ahora mismo';
            const feverEl = document.getElementById('feverStat');
            const repEl = document.getElementById('repellentStat');
            feverEl.textContent = parseInt(feverEl.textContent) + Math.floor(Math.random() * 5);
            repEl.textContent = parseInt(repEl.textContent) + Math.floor(Math.random() * 3);
        }

        function activatePlan() {
            alert('‚úÖ Plan de Acci√≥n Activado\n\nSe enviaron notificaciones a:\n‚Ä¢ 8 brigadas de fumigaci√≥n\n‚Ä¢ Hospital Municipal\n‚Ä¢ 12 centros de salud\n‚Ä¢ Equipo de comunicaci√≥n\n\nMonitoreo intensivo iniciado.');
            closeModal('actionPlanModal');
        }

        // ==========================================
        // REAL-TIME SIMULATION
        // ==========================================
        function startRealTimeSimulation() {
            setInterval(() => {
                const feverEl = document.getElementById('feverStat');
                const repEl = document.getElementById('repellentStat');
                if (Math.random() > 0.6) feverEl.textContent = parseInt(feverEl.textContent) + Math.floor(Math.random() * 3);
                if (Math.random() > 0.7) repEl.textContent = parseInt(repEl.textContent) + Math.floor(Math.random() * 2);
            }, 8000);
        }

        // Tab interactions
        document.querySelectorAll('.alert-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.alert-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });

        document.querySelectorAll('.card-btn[data-days]').forEach(btn => {
            btn.addEventListener('click', function() {
                this.parentElement.querySelectorAll('.card-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Nav items
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
            });
        });
    </script>
</body>
</html>
